import{ar as G,O as U,a7 as w,s as b,R as W,aM as X,aN as Z,d as j,aO as J,W as y,w as z,z as N,y as F,G as Q,T as ee,L as A,at as te,X as M,au as x,K as V,a5 as q,ae as ne,aP as oe,ac as le,q as O,o as se,b as C,c as L,f as _,e as $,j as ae,Y as re,ad as ie,D as ce,_ as ue}from"./index-88c893b2.js";import{E as de}from"./el-card-b3f6a979.js";import{_ as fe}from"./pr_headerImg-538ee89f.js";import{f as ve}from"./index-d9401ef6.js";import{g as me}from"./position-b8052de6.js";import{a as ge}from"./scroll-cbf38af8.js";import{t as H}from"./throttle-9af60687.js";import"./axios-a342f982.js";import"./_commonjsHelpers-725317a4.js";import"./debounce-591aacac.js";const g="ElInfiniteScroll",be=50,pe=200,_e=0,he={delay:{type:Number,default:pe},distance:{type:Number,default:_e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},B=(e,t)=>Object.entries(he).reduce((n,[o,a])=>{var s,r;const{type:u,default:d}=a,i=e.getAttribute(`infinite-scroll-${o}`);let c=(r=(s=t[i])!=null?s:i)!=null?r:d;return c=c==="false"?!1:c,c=u(c),n[o]=Number.isNaN(c)?d:c,n},{}),K=e=>{const{observer:t}=e[g];t&&(t.disconnect(),delete e[g].observer)},ye=(e,t)=>{const{container:n,containerEl:o,instance:a,observer:s,lastScrollTop:r}=e[g],{disabled:u,distance:d}=B(e,a),{clientHeight:i,scrollHeight:c,scrollTop:v}=o,l=v-r;if(e[g].lastScrollTop=v,s||u||l<0)return;let f=!1;if(n===e)f=c-(i+v)<=d;else{const{clientTop:m,scrollHeight:h}=e,p=me(e,o);f=v+i>=p+m+h-d}f&&t.call(a)};function k(e,t){const{containerEl:n,instance:o}=e[g],{disabled:a}=B(e,o);a||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?t.call(o):K(e))}const xe={async mounted(e,t){const{instance:n,value:o}=t;G(o)||U(g,"'v-infinite-scroll' binding value must be a function"),await w();const{delay:a,immediate:s}=B(e,n),r=ge(e,!0),u=r===window?document.documentElement:r,d=H(ye.bind(null,e,o),a);if(r){if(e[g]={instance:n,container:r,containerEl:u,delay:a,cb:o,onScroll:d,lastScrollTop:u.scrollTop},s){const i=new MutationObserver(H(k.bind(null,e,o),be));e[g].observer=i,i.observe(e,{childList:!0,subtree:!0}),k(e,o)}r.addEventListener("scroll",d)}},unmounted(e){const{container:t,onScroll:n}=e[g];t==null||t.removeEventListener("scroll",n),K(e)},async updated(e){if(!e[g])await w();else{const{containerEl:t,cb:n,observer:o}=e[g];t.clientHeight&&o&&k(e,n)}}},P=xe;P.install=e=>{e.directive("InfiniteScroll",P)};const Ce=P;function Le(e){let t;const n=b(!1),o=W({...e,originalPosition:"",originalOverflow:"",visible:!1});function a(l){o.text=l}function s(){const l=o.parent,f=v.ns;if(!l.vLoadingAddClassList){let m=l.getAttribute("loading-number");m=Number.parseInt(m)-1,m?l.setAttribute("loading-number",m.toString()):(A(l,f.bm("parent","relative")),l.removeAttribute("loading-number")),A(l,f.bm("parent","hidden"))}r(),c.unmount()}function r(){var l,f;(f=(l=v.$el)==null?void 0:l.parentNode)==null||f.removeChild(v.$el)}function u(){var l;e.beforeClose&&!e.beforeClose()||(n.value=!0,clearTimeout(t),t=window.setTimeout(d,400),o.visible=!1,(l=e.closed)==null||l.call(e))}function d(){if(!n.value)return;const l=o.parent;n.value=!1,l.vLoadingAddClassList=void 0,s()}const i=j({name:"ElLoading",setup(l,{expose:f}){const{ns:m,zIndex:h}=J("loading");return f({ns:m,zIndex:h}),()=>{const p=o.spinner||o.svg,I=y("svg",{class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"0 0 50 50",...p?{innerHTML:p}:{}},[y("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),T=o.text?y("p",{class:m.b("text")},[o.text]):void 0;return y(ee,{name:m.b("fade"),onAfterLeave:d},{default:z(()=>[N(F("div",{style:{backgroundColor:o.background||""},class:[m.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[y("div",{class:m.b("spinner")},[I,T])]),[[Q,o.visible]])])})}}}),c=X(i),v=c.mount(document.createElement("div"));return{...Z(o),setText:a,removeElLoadingChild:r,close:u,handleAfterLeave:d,vm:v,get $el(){return v.$el}}}let S;const Se=function(e={}){if(!te)return;const t=Ee(e);if(t.fullscreen&&S)return S;const n=Le({...t,closed:()=>{var a;(a=t.closed)==null||a.call(t),t.fullscreen&&(S=void 0)}});we(t,t.parent,n),D(t,t.parent,n),t.parent.vLoadingAddClassList=()=>D(t,t.parent,n);let o=t.parent.getAttribute("loading-number");return o?o=`${Number.parseInt(o)+1}`:o="1",t.parent.setAttribute("loading-number",o),t.parent.appendChild(n.$el),w(()=>n.visible.value=t.visible),t.fullscreen&&(S=n),n},Ee=e=>{var t,n,o,a;let s;return M(e.target)?s=(t=document.querySelector(e.target))!=null?t:document.body:s=e.target||document.body,{parent:s===document.body||e.body?document.body:s,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:s===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(o=e.lock)!=null?o:!1,customClass:e.customClass||"",visible:(a=e.visible)!=null?a:!0,target:s}},we=async(e,t,n)=>{const{nextZIndex:o}=n.vm.zIndex||n.vm._.exposed.zIndex,a={};if(e.fullscreen)n.originalPosition.value=x(document.body,"position"),n.originalOverflow.value=x(document.body,"overflow"),a.zIndex=o();else if(e.parent===document.body){n.originalPosition.value=x(document.body,"position"),await w();for(const s of["top","left"]){const r=s==="top"?"scrollTop":"scrollLeft";a[s]=`${e.target.getBoundingClientRect()[s]+document.body[r]+document.documentElement[r]-Number.parseInt(x(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])a[s]=`${e.target.getBoundingClientRect()[s]}px`}else n.originalPosition.value=x(t,"position");for(const[s,r]of Object.entries(a))n.$el.style[s]=r},D=(e,t,n)=>{const o=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?A(t,o.bm("parent","relative")):V(t,o.bm("parent","relative")),e.fullscreen&&e.lock?V(t,o.bm("parent","hidden")):A(t,o.bm("parent","hidden"))},E=Symbol("ElLoading"),R=(e,t)=>{var n,o,a,s;const r=t.instance,u=l=>q(t.value)?t.value[l]:void 0,d=l=>{const f=M(l)&&(r==null?void 0:r[l])||l;return f&&b(f)},i=l=>d(u(l)||e.getAttribute(`element-loading-${oe(l)}`)),c=(n=u("fullscreen"))!=null?n:t.modifiers.fullscreen,v={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:c,target:(o=u("target"))!=null?o:c?void 0:e,body:(a=u("body"))!=null?a:t.modifiers.body,lock:(s=u("lock"))!=null?s:t.modifiers.lock};e[E]={options:v,instance:Se(v)}},Ae=(e,t)=>{for(const n of Object.keys(t))ne(t[n])&&(t[n].value=e[n])},Ie={mounted(e,t){t.value&&R(e,t)},updated(e,t){const n=e[E];t.oldValue!==t.value&&(t.value&&!t.oldValue?R(e,t):t.value&&t.oldValue?q(t.value)&&Ae(t.value,n.options):n==null||n.instance.close())},unmounted(e){var t;(t=e[E])==null||t.instance.close(),e[E]=null}};const Te={class:"albumPhoto_container"},ke={class:"albumPhoto_content"},Ne=["src"],Pe={"element-loading-text":"Loading..."},Be={key:0,class:"finished"},Ve=j({__name:"albumPhoto",setup(e){let t="https://pic.imgdb.cn/item/64c607331ddac507cc49cc9d.jpg";const n=le(),o=O(()=>Number(n.params.id)),a=O(()=>{let l=n.query.title;return n.meta.title=l,document.title=`Swhite's小窝-${l}`,l.split("")});let s=b([]),r=b({page:1,pageSize:10}),u=b();const d=async()=>{let l=await ve({...r.value,id:o.value});s.value.push(...l.data.pageData),u.value=l.data.totalPage};se(()=>{d()});let i=b(!1),c=b(!1);const v=()=>{i.value=!0,r.value.page<u.value?(r.value.page++,d()):r.value.page>=u.value&&(c.value=!0),i.value=!1};return(l,f)=>{const m=fe,h=de,p=Ie,I=Ce;return C(),L("div",Te,[F(m,{img:_(t),titleArr:_(a)},null,8,["img","titleArr"]),$("div",ke,[N((C(),ae(h,{shadow:"hover",class:"albumPhoto_elCard","infinite-scroll-disabled":_(c)},{default:z(()=>[(C(!0),L(re,null,ie(_(s),(T,Y)=>(C(),L("img",{class:"albumPhotoItem_img",src:T,alt:"",key:Y},null,8,Ne))),128)),N($("div",Pe,null,512),[[p,_(i)]]),_(c)?(C(),L("div",Be,"没有更多啦 ┭┮﹏┭┮")):ce("",!0)]),_:1},8,["infinite-scroll-disabled"])),[[I,v]])])])}}});const Ke=ue(Ve,[["__scopeId","data-v-de2ddbe2"]]);export{Ke as default};
