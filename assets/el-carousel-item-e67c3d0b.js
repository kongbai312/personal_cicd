import{l as ve,aF as Me,n as Ae,s as p,q as O,f as e,U as K,aD as Le,o as fe,a4 as $e,W as He,V as Be,Y as Oe,aG as Pe,h as me,d as x,i as de,v as Ve,b as H,c as D,e as Z,j as ne,w as Q,z as J,B,A as G,y as Y,E as re,aH as ze,G as X,T as ie,D as q,R as Re,r as he,aw as Ie,Z as De,ac as Ue,C as We,k as ge,O as je,S as Fe,aI as Ke,aJ as Ge,I as Ye,aa as qe}from"./index-38d1de3d.js";import{u as Je}from"./index-0935f8d2.js";import{f as Xe}from"./vnode-6d8265e6.js";import{t as ue}from"./throttle-2b877502.js";const Ze=ve({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Qe={change:(a,P)=>[a,P].every(Me)},pe=Symbol("carouselContextKey"),ce=300,xe=(a,P,i)=>{const{children:o,addChild:k,removeChild:y}=Je(me(),"ElCarouselItem"),A=Ae(),s=p(-1),d=p(null),_=p(!1),h=p(),E=p(0),C=p(!0),N=O(()=>a.arrow!=="never"&&!e(w)),S=O(()=>o.value.some(t=>t.props.label.toString().length>0)),L=O(()=>a.type==="card"),w=O(()=>a.direction==="vertical"),T=O(()=>a.height!=="auto"?{height:a.height}:{height:`${E.value}px`,overflow:"hidden"}),$=ue(t=>{v(t)},ce,{trailing:!0}),U=ue(t=>{V(t)},ce),l=t=>C.value?s.value<=1?t<=1:t>1:!0;function n(){d.value&&(clearInterval(d.value),d.value=null)}function c(){a.interval<=0||!a.autoplay||d.value||(d.value=setInterval(()=>m(),a.interval))}const m=()=>{s.value<o.value.length-1?s.value=s.value+1:a.loop&&(s.value=0)};function v(t){if(Oe(t)){const R=o.value.filter(z=>z.props.name===t);R.length>0&&(t=o.value.indexOf(R[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const u=o.value.length,M=s.value;t<0?s.value=a.loop?u-1:0:t>=u?s.value=a.loop?0:u-1:s.value=t,M===s.value&&r(M),se()}function r(t){o.value.forEach((u,M)=>{u.translateItem(M,s.value,t)})}function b(t,u){var M,R,z,j;const F=e(o),oe=F.length;if(oe===0||!t.states.inStage)return!1;const _e=u+1,Se=u-1,le=oe-1,ke=F[le].states.active,Ee=F[0].states.active,Ne=(R=(M=F[_e])==null?void 0:M.states)==null?void 0:R.active,Te=(j=(z=F[Se])==null?void 0:z.states)==null?void 0:j.active;return u===le&&Ee||Ne?"left":u===0&&ke||Te?"right":!1}function W(){_.value=!0,a.pauseOnHover&&n()}function ee(){_.value=!1,c()}function I(t){e(w)||o.value.forEach((u,M)=>{t===b(u,M)&&(u.states.hover=!0)})}function f(){e(w)||o.value.forEach(t=>{t.states.hover=!1})}function g(t){s.value=t}function V(t){a.trigger==="hover"&&t!==s.value&&(s.value=t)}function te(){v(s.value-1)}function Ce(){v(s.value+1)}function se(){n(),a.pauseOnHover||c()}function we(t){a.height==="auto"&&(E.value=t)}function be(){var t;const u=(t=A.default)==null?void 0:t.call(A);if(!u)return null;const M=Xe(u),R="ElCarouselItem",z=M.filter(j=>Pe(j)&&j.type.name===R);return(z==null?void 0:z.length)===2&&a.loop&&!L.value?(C.value=!0,z):(C.value=!1,null)}K(()=>s.value,(t,u)=>{r(u),C.value&&(t=t%2,u=u%2),u>-1&&P("change",t,u)}),K(()=>a.autoplay,t=>{t?c():n()}),K(()=>a.loop,()=>{v(s.value)}),K(()=>a.interval,()=>{se()});const ae=Le();return fe(()=>{K(()=>o.value,()=>{o.value.length>0&&v(a.initialIndex)},{immediate:!0}),ae.value=$e(h.value,()=>{r()}),c()}),He(()=>{n(),h.value&&ae.value&&ae.value.stop()}),Be(pe,{root:h,isCardType:L,isVertical:w,items:o,loop:a.loop,addItem:k,removeItem:y,setActiveItem:v,setContainerHeight:we}),{root:h,activeIndex:s,arrowDisplay:N,hasLabel:S,hover:_,isCardType:L,items:o,isVertical:w,containerStyle:T,isItemsTwoLength:C,handleButtonEnter:I,handleButtonLeave:f,handleIndicatorClick:g,handleMouseEnter:W,handleMouseLeave:ee,setActiveItem:v,prev:te,next:Ce,PlaceholderItem:be,isTwoLengthShow:l,throttledArrowClick:$,throttledIndicatorHover:U}},et=["aria-label"],tt=["aria-label"],at=["onMouseenter","onClick"],st=["aria-label"],ot={key:0},lt="ElCarousel",nt=x({name:lt}),rt=x({...nt,props:Ze,emits:Qe,setup(a,{expose:P,emit:i}){const o=a,{root:k,activeIndex:y,arrowDisplay:A,hasLabel:s,hover:d,isCardType:_,items:h,isVertical:E,containerStyle:C,handleButtonEnter:N,handleButtonLeave:S,handleIndicatorClick:L,handleMouseEnter:w,handleMouseLeave:T,setActiveItem:$,prev:U,next:l,PlaceholderItem:n,isTwoLengthShow:c,throttledArrowClick:m,throttledIndicatorHover:v}=xe(o,i),r=de("carousel"),{t:b}=Ve(),W=O(()=>{const I=[r.b(),r.m(o.direction)];return e(_)&&I.push(r.m("card")),I}),ee=O(()=>{const I=[r.e("indicators"),r.em("indicators",o.direction)];return e(s)&&I.push(r.em("indicators","labels")),o.indicatorPosition==="outside"&&I.push(r.em("indicators","outside")),e(E)&&I.push(r.em("indicators","right")),I});return P({setActiveItem:$,prev:U,next:l}),(I,f)=>(H(),D("div",{ref_key:"root",ref:k,class:B(e(W)),onMouseenter:f[6]||(f[6]=G((...g)=>e(w)&&e(w)(...g),["stop"])),onMouseleave:f[7]||(f[7]=G((...g)=>e(T)&&e(T)(...g),["stop"]))},[Z("div",{class:B(e(r).e("container")),style:Ie(e(C))},[e(A)?(H(),ne(ie,{key:0,name:"carousel-arrow-left",persisted:""},{default:Q(()=>[J(Z("button",{type:"button",class:B([e(r).e("arrow"),e(r).em("arrow","left")]),"aria-label":e(b)("el.carousel.leftArrow"),onMouseenter:f[0]||(f[0]=g=>e(N)("left")),onMouseleave:f[1]||(f[1]=(...g)=>e(S)&&e(S)(...g)),onClick:f[2]||(f[2]=G(g=>e(m)(e(y)-1),["stop"]))},[Y(e(re),null,{default:Q(()=>[Y(e(ze))]),_:1})],42,et),[[X,(I.arrow==="always"||e(d))&&(o.loop||e(y)>0)]])]),_:1})):q("v-if",!0),e(A)?(H(),ne(ie,{key:1,name:"carousel-arrow-right",persisted:""},{default:Q(()=>[J(Z("button",{type:"button",class:B([e(r).e("arrow"),e(r).em("arrow","right")]),"aria-label":e(b)("el.carousel.rightArrow"),onMouseenter:f[3]||(f[3]=g=>e(N)("right")),onMouseleave:f[4]||(f[4]=(...g)=>e(S)&&e(S)(...g)),onClick:f[5]||(f[5]=G(g=>e(m)(e(y)+1),["stop"]))},[Y(e(re),null,{default:Q(()=>[Y(e(Re))]),_:1})],42,tt),[[X,(I.arrow==="always"||e(d))&&(o.loop||e(y)<e(h).length-1)]])]),_:1})):q("v-if",!0),Y(e(n)),he(I.$slots,"default")],6),I.indicatorPosition!=="none"?(H(),D("ul",{key:0,class:B(e(ee))},[(H(!0),D(De,null,Ue(e(h),(g,V)=>J((H(),D("li",{key:V,class:B([e(r).e("indicator"),e(r).em("indicator",I.direction),e(r).is("active",V===e(y))]),onMouseenter:te=>e(v)(V),onClick:G(te=>e(L)(V),["stop"])},[Z("button",{class:B(e(r).e("button")),"aria-label":e(b)("el.carousel.indicator",{index:V+1})},[e(s)?(H(),D("span",ot,We(g.props.label),1)):q("v-if",!0)],10,st)],42,at)),[[X,e(c)(V)]])),128))],2)):q("v-if",!0)],34))}});var it=ge(rt,[["__file","carousel.vue"]]);const ut=ve({name:{type:String,default:""},label:{type:[String,Number],default:""}}),ct=(a,P)=>{const i=je(pe),o=me(),k=.83,y=p(),A=p(!1),s=p(0),d=p(1),_=p(!1),h=p(!1),E=p(!1),C=p(!1),{isCardType:N,isVertical:S}=i;function L(l,n,c){const m=c-1,v=n-1,r=n+1,b=c/2;return n===0&&l===m?-1:n===m&&l===0?c:l<v&&n-l>=b?c+1:l>r&&l-n>=b?-2:l}function w(l,n){var c,m;const v=e(S)?((c=i.root.value)==null?void 0:c.offsetHeight)||0:((m=i.root.value)==null?void 0:m.offsetWidth)||0;return E.value?v*((2-k)*(l-n)+1)/4:l<n?-(1+k)*v/4:(3+k)*v/4}function T(l,n,c){const m=i.root.value;return m?((c?m.offsetHeight:m.offsetWidth)||0)*(l-n):0}const $=(l,n,c)=>{var m;const v=e(N),r=(m=i.items.value.length)!=null?m:Number.NaN,b=l===n;!v&&!Ge(c)&&(C.value=b||l===c),!b&&r>2&&i.loop&&(l=L(l,n,r));const W=e(S);_.value=b,v?(E.value=Math.round(Math.abs(l-n))<=1,s.value=w(l,n),d.value=e(_)?1:k):s.value=T(l,n,W),h.value=!0,b&&y.value&&i.setContainerHeight(y.value.offsetHeight)};function U(){if(i&&e(N)){const l=i.items.value.findIndex(({uid:n})=>n===o.uid);i.setActiveItem(l)}}return fe(()=>{i.addItem({props:a,states:Fe({hover:A,translate:s,scale:d,active:_,ready:h,inStage:E,animating:C}),uid:o.uid,translateItem:$})}),Ke(()=>{i.removeItem(o.uid)}),{carouselItemRef:y,active:_,animating:C,hover:A,inStage:E,isVertical:S,translate:s,isCardType:N,scale:d,ready:h,handleItemClick:U}},vt=x({name:"ElCarouselItem"}),ft=x({...vt,props:ut,setup(a){const P=a,i=de("carousel"),{carouselItemRef:o,active:k,animating:y,hover:A,inStage:s,isVertical:d,translate:_,isCardType:h,scale:E,ready:C,handleItemClick:N}=ct(P),S=O(()=>[i.e("item"),i.is("active",k.value),i.is("in-stage",s.value),i.is("hover",A.value),i.is("animating",y.value),{[i.em("item","card")]:h.value,[i.em("item","card-vertical")]:h.value&&d.value}]),L=O(()=>{const T=`${`translate${e(d)?"Y":"X"}`}(${e(_)}px)`,$=`scale(${e(E)})`;return{transform:[T,$].join(" ")}});return(w,T)=>J((H(),D("div",{ref_key:"carouselItemRef",ref:o,class:B(e(S)),style:Ie(e(L)),onClick:T[0]||(T[0]=(...$)=>e(N)&&e(N)(...$))},[e(h)?J((H(),D("div",{key:0,class:B(e(i).e("mask"))},null,2)),[[X,!e(k)]]):q("v-if",!0),he(w.$slots,"default")],6)),[[X,e(C)]])}});var ye=ge(ft,[["__file","carousel-item.vue"]]);const gt=Ye(it,{CarouselItem:ye}),pt=qe(ye);export{gt as E,pt as a};
