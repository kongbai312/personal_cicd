import{l as ce,aF as Me,ai as $e,s as y,q as P,f as e,U as G,aD as Ae,o as fe,a4 as He,W as Le,V as Be,Y as Oe,aG as Pe,h as ve,d as x,i as me,b as H,c as R,e as Z,j as ne,w as Q,A as J,C as L,B as K,z as Y,E as le,aH as Ve,G as X,T as re,F as q,R as ze,r as de,aw as he,Z as Re,ab as De,D as Fe,k as Ie,O as Ue,S as We,aI as je,aJ as Ge,I as Ke,a9 as Ye}from"./index-9732ae9c.js";import{u as qe}from"./index-bd58a9e7.js";import{f as Je}from"./vnode-0795334f.js";import{t as ie}from"./throttle-b07789f9.js";const Xe=ce({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Ze={change:(a,B)=>[a,B].every(Me)},pe=Symbol("carouselContextKey"),ue=300,Qe=(a,B,i)=>{const{children:o,addChild:_,removeChild:C}=qe(ve(),"ElCarouselItem"),M=$e(),s=y(-1),d=y(null),S=y(!1),h=y(),k=y(0),w=y(!0),E=P(()=>a.arrow!=="never"&&!e(I)),b=P(()=>o.value.some(t=>t.props.label.toString().length>0)),$=P(()=>a.type==="card"),I=P(()=>a.direction==="vertical"),A=P(()=>a.height!=="auto"?{height:a.height}:{height:`${k.value}px`,overflow:"hidden"}),D=ie(t=>{f(t)},ue,{trailing:!0}),F=ie(t=>{ee(t)},ue),n=t=>w.value?s.value<=1?t<=1:t>1:!0;function l(){d.value&&(clearInterval(d.value),d.value=null)}function c(){a.interval<=0||!a.autoplay||d.value||(d.value=setInterval(()=>m(),a.interval))}const m=()=>{s.value<o.value.length-1?s.value=s.value+1:a.loop&&(s.value=0)};function f(t){if(Oe(t)){const z=o.value.filter(O=>O.props.name===t);z.length>0&&(t=o.value.indexOf(z[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const u=o.value.length,T=s.value;t<0?s.value=a.loop?u-1:0:t>=u?s.value=a.loop?0:u-1:s.value=t,T===s.value&&r(T),ae()}function r(t){o.value.forEach((u,T)=>{u.translateItem(T,s.value,t)})}function N(t,u){var T,z,O,W;const j=e(o),se=j.length;if(se===0||!t.states.inStage)return!1;const be=u+1,_e=u-1,oe=se-1,ke=j[oe].states.active,Ee=j[0].states.active,Ne=(z=(T=j[be])==null?void 0:T.states)==null?void 0:z.active,Te=(W=(O=j[_e])==null?void 0:O.states)==null?void 0:W.active;return u===oe&&Ee||Ne?"left":u===0&&ke||Te?"right":!1}function U(){S.value=!0,a.pauseOnHover&&l()}function p(){S.value=!1,c()}function v(t){e(I)||o.value.forEach((u,T)=>{t===N(u,T)&&(u.states.hover=!0)})}function g(){e(I)||o.value.forEach(t=>{t.states.hover=!1})}function V(t){s.value=t}function ee(t){a.trigger==="hover"&&t!==s.value&&(s.value=t)}function ye(){f(s.value-1)}function Ce(){f(s.value+1)}function ae(){l(),a.pauseOnHover||c()}function we(t){a.height==="auto"&&(k.value=t)}function Se(){var t;const u=(t=M.default)==null?void 0:t.call(M);if(!u)return null;const T=Je(u),z="ElCarouselItem",O=T.filter(W=>Pe(W)&&W.type.name===z);return(O==null?void 0:O.length)===2&&a.loop&&!$.value?(w.value=!0,O):(w.value=!1,null)}G(()=>s.value,(t,u)=>{r(u),w.value&&(t=t%2,u=u%2),u>-1&&B("change",t,u)}),G(()=>a.autoplay,t=>{t?c():l()}),G(()=>a.loop,()=>{f(s.value)}),G(()=>a.interval,()=>{ae()});const te=Ae();return fe(()=>{G(()=>o.value,()=>{o.value.length>0&&f(a.initialIndex)},{immediate:!0}),te.value=He(h.value,()=>{r()}),c()}),Le(()=>{l(),h.value&&te.value&&te.value.stop()}),Be(pe,{root:h,isCardType:$,isVertical:I,items:o,loop:a.loop,addItem:_,removeItem:C,setActiveItem:f,setContainerHeight:we}),{root:h,activeIndex:s,arrowDisplay:E,hasLabel:b,hover:S,isCardType:$,items:o,isVertical:I,containerStyle:A,isItemsTwoLength:w,handleButtonEnter:v,handleButtonLeave:g,handleIndicatorClick:V,handleMouseEnter:U,handleMouseLeave:p,setActiveItem:f,prev:ye,next:Ce,PlaceholderItem:Se,isTwoLengthShow:n,throttledArrowClick:D,throttledIndicatorHover:F}},xe=["onMouseenter","onClick"],et={key:0},tt="ElCarousel",at=x({name:tt}),st=x({...at,props:Xe,emits:Ze,setup(a,{expose:B,emit:i}){const o=a,{root:_,activeIndex:C,arrowDisplay:M,hasLabel:s,hover:d,isCardType:S,items:h,isVertical:k,containerStyle:w,handleButtonEnter:E,handleButtonLeave:b,handleIndicatorClick:$,handleMouseEnter:I,handleMouseLeave:A,setActiveItem:D,prev:F,next:n,PlaceholderItem:l,isTwoLengthShow:c,throttledArrowClick:m,throttledIndicatorHover:f}=Qe(o,i),r=me("carousel"),N=P(()=>{const p=[r.b(),r.m(o.direction)];return e(S)&&p.push(r.m("card")),p}),U=P(()=>{const p=[r.e("indicators"),r.em("indicators",o.direction)];return e(s)&&p.push(r.em("indicators","labels")),o.indicatorPosition==="outside"&&p.push(r.em("indicators","outside")),e(k)&&p.push(r.em("indicators","right")),p});return B({setActiveItem:D,prev:F,next:n}),(p,v)=>(H(),R("div",{ref_key:"root",ref:_,class:L(e(N)),onMouseenter:v[6]||(v[6]=K((...g)=>e(I)&&e(I)(...g),["stop"])),onMouseleave:v[7]||(v[7]=K((...g)=>e(A)&&e(A)(...g),["stop"]))},[Z("div",{class:L(e(r).e("container")),style:he(e(w))},[e(M)?(H(),ne(re,{key:0,name:"carousel-arrow-left",persisted:""},{default:Q(()=>[J(Z("button",{type:"button",class:L([e(r).e("arrow"),e(r).em("arrow","left")]),onMouseenter:v[0]||(v[0]=g=>e(E)("left")),onMouseleave:v[1]||(v[1]=(...g)=>e(b)&&e(b)(...g)),onClick:v[2]||(v[2]=K(g=>e(m)(e(C)-1),["stop"]))},[Y(e(le),null,{default:Q(()=>[Y(e(Ve))]),_:1})],34),[[X,(p.arrow==="always"||e(d))&&(o.loop||e(C)>0)]])]),_:1})):q("v-if",!0),e(M)?(H(),ne(re,{key:1,name:"carousel-arrow-right",persisted:""},{default:Q(()=>[J(Z("button",{type:"button",class:L([e(r).e("arrow"),e(r).em("arrow","right")]),onMouseenter:v[3]||(v[3]=g=>e(E)("right")),onMouseleave:v[4]||(v[4]=(...g)=>e(b)&&e(b)(...g)),onClick:v[5]||(v[5]=K(g=>e(m)(e(C)+1),["stop"]))},[Y(e(le),null,{default:Q(()=>[Y(e(ze))]),_:1})],34),[[X,(p.arrow==="always"||e(d))&&(o.loop||e(C)<e(h).length-1)]])]),_:1})):q("v-if",!0),Y(e(l)),de(p.$slots,"default")],6),p.indicatorPosition!=="none"?(H(),R("ul",{key:0,class:L(e(U))},[(H(!0),R(Re,null,De(e(h),(g,V)=>J((H(),R("li",{key:V,class:L([e(r).e("indicator"),e(r).em("indicator",p.direction),e(r).is("active",V===e(C))]),onMouseenter:ee=>e(f)(V),onClick:K(ee=>e($)(V),["stop"])},[Z("button",{class:L(e(r).e("button"))},[e(s)?(H(),R("span",et,Fe(g.props.label),1)):q("v-if",!0)],2)],42,xe)),[[X,e(c)(V)]])),128))],2)):q("v-if",!0)],34))}});var ot=Ie(st,[["__file","carousel.vue"]]);const nt=ce({name:{type:String,default:""},label:{type:[String,Number],default:""}}),lt=(a,B)=>{const i=Ue(pe),o=ve(),_=.83,C=y(),M=y(!1),s=y(0),d=y(1),S=y(!1),h=y(!1),k=y(!1),w=y(!1),{isCardType:E,isVertical:b}=i;function $(n,l,c){const m=c-1,f=l-1,r=l+1,N=c/2;return l===0&&n===m?-1:l===m&&n===0?c:n<f&&l-n>=N?c+1:n>r&&n-l>=N?-2:n}function I(n,l){var c,m;const f=e(b)?((c=i.root.value)==null?void 0:c.offsetHeight)||0:((m=i.root.value)==null?void 0:m.offsetWidth)||0;return k.value?f*((2-_)*(n-l)+1)/4:n<l?-(1+_)*f/4:(3+_)*f/4}function A(n,l,c){const m=i.root.value;return m?((c?m.offsetHeight:m.offsetWidth)||0)*(n-l):0}const D=(n,l,c)=>{var m;const f=e(E),r=(m=i.items.value.length)!=null?m:Number.NaN,N=n===l;!f&&!Ge(c)&&(w.value=N||n===c),!N&&r>2&&i.loop&&(n=$(n,l,r));const U=e(b);S.value=N,f?(k.value=Math.round(Math.abs(n-l))<=1,s.value=I(n,l),d.value=e(S)?1:_):s.value=A(n,l,U),h.value=!0,N&&C.value&&i.setContainerHeight(C.value.offsetHeight)};function F(){if(i&&e(E)){const n=i.items.value.findIndex(({uid:l})=>l===o.uid);i.setActiveItem(n)}}return fe(()=>{i.addItem({props:a,states:We({hover:M,translate:s,scale:d,active:S,ready:h,inStage:k,animating:w}),uid:o.uid,translateItem:D})}),je(()=>{i.removeItem(o.uid)}),{carouselItemRef:C,active:S,animating:w,hover:M,inStage:k,isVertical:b,translate:s,isCardType:E,scale:d,ready:h,handleItemClick:F}},rt=x({name:"ElCarouselItem"}),it=x({...rt,props:nt,setup(a){const B=a,i=me("carousel"),{carouselItemRef:o,active:_,animating:C,hover:M,inStage:s,isVertical:d,translate:S,isCardType:h,scale:k,ready:w,handleItemClick:E}=lt(B),b=P(()=>{const I=`${`translate${e(d)?"Y":"X"}`}(${e(S)}px)`,A=`scale(${e(k)})`;return{transform:[I,A].join(" ")}});return($,I)=>J((H(),R("div",{ref_key:"carouselItemRef",ref:o,class:L([e(i).e("item"),e(i).is("active",e(_)),e(i).is("in-stage",e(s)),e(i).is("hover",e(M)),e(i).is("animating",e(C)),{[e(i).em("item","card")]:e(h),[e(i).em("item","card-vertical")]:e(h)&&e(d)}]),style:he(e(b)),onClick:I[0]||(I[0]=(...A)=>e(E)&&e(E)(...A))},[e(h)?J((H(),R("div",{key:0,class:L(e(i).e("mask"))},null,2)),[[X,!e(_)]]):q("v-if",!0),de($.$slots,"default")],6)),[[X,e(w)]])}});var ge=Ie(it,[["__file","carousel-item.vue"]]);const mt=Ke(ot,{CarouselItem:ge}),dt=Ye(ge);export{mt as E,dt as a};
