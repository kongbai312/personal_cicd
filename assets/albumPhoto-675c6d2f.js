import{ap as G,P as U,a6 as E,s as b,S as Z,aK as X,aL as J,d as j,aM as Q,X as y,w as z,A as k,z as R,G as W,T as ee,L as w,ar as te,Y as K,as as x,K as V,a5 as M,ac as oe,aN as ne,aa as le,q as $,o as se,b as C,c as L,f as _,e as O,j as ae,Z as re,ab as ie,F as ce,_ as ue}from"./index-0ebde180.js";import{E as de}from"./el-card-67a3c5a3.js";import{_ as fe}from"./pr_headerImg-25b766c0.js";import{f as ve}from"./index-31e3b706.js";import{g as me}from"./position-162d9c45.js";import{a as ge}from"./scroll-571049e5.js";import{t as H}from"./throttle-63eea221.js";import"./axios-28bc18a3.js";import"./_commonjsHelpers-de833af9.js";import"./debounce-c61e03cb.js";const g="ElInfiniteScroll",be=50,pe=200,_e=0,he={delay:{type:Number,default:pe},distance:{type:Number,default:_e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},B=(e,t)=>Object.entries(he).reduce((o,[n,a])=>{var s,r;const{type:u,default:d}=a,i=e.getAttribute(`infinite-scroll-${n}`);let c=(r=(s=t[i])!=null?s:i)!=null?r:d;return c=c==="false"?!1:c,c=u(c),o[n]=Number.isNaN(c)?d:c,o},{}),q=e=>{const{observer:t}=e[g];t&&(t.disconnect(),delete e[g].observer)},ye=(e,t)=>{const{container:o,containerEl:n,instance:a,observer:s,lastScrollTop:r}=e[g],{disabled:u,distance:d}=B(e,a),{clientHeight:i,scrollHeight:c,scrollTop:v}=n,l=v-r;if(e[g].lastScrollTop=v,s||u||l<0)return;let f=!1;if(o===e)f=c-(i+v)<=d;else{const{clientTop:m,scrollHeight:h}=e,p=me(e,n);f=v+i>=p+m+h-d}f&&t.call(a)};function T(e,t){const{containerEl:o,instance:n}=e[g],{disabled:a}=B(e,n);a||o.clientHeight===0||(o.scrollHeight<=o.clientHeight?t.call(n):q(e))}const xe={async mounted(e,t){const{instance:o,value:n}=t;G(n)||U(g,"'v-infinite-scroll' binding value must be a function"),await E();const{delay:a,immediate:s}=B(e,o),r=ge(e,!0),u=r===window?document.documentElement:r,d=H(ye.bind(null,e,n),a);if(r){if(e[g]={instance:o,container:r,containerEl:u,delay:a,cb:n,onScroll:d,lastScrollTop:u.scrollTop},s){const i=new MutationObserver(H(T.bind(null,e,n),be));e[g].observer=i,i.observe(e,{childList:!0,subtree:!0}),T(e,n)}r.addEventListener("scroll",d)}},unmounted(e){const{container:t,onScroll:o}=e[g];t==null||t.removeEventListener("scroll",o),q(e)},async updated(e){if(!e[g])await E();else{const{containerEl:t,cb:o,observer:n}=e[g];t.clientHeight&&n&&T(e,o)}}},N=xe;N.install=e=>{e.directive("InfiniteScroll",N)};const Ce=N;function Le(e){let t;const o=b(!1),n=Z({...e,originalPosition:"",originalOverflow:"",visible:!1});function a(l){n.text=l}function s(){const l=n.parent,f=v.ns;if(!l.vLoadingAddClassList){let m=l.getAttribute("loading-number");m=Number.parseInt(m)-1,m?l.setAttribute("loading-number",m.toString()):(w(l,f.bm("parent","relative")),l.removeAttribute("loading-number")),w(l,f.bm("parent","hidden"))}r(),c.unmount()}function r(){var l,f;(f=(l=v.$el)==null?void 0:l.parentNode)==null||f.removeChild(v.$el)}function u(){var l;e.beforeClose&&!e.beforeClose()||(o.value=!0,clearTimeout(t),t=window.setTimeout(d,400),n.visible=!1,(l=e.closed)==null||l.call(e))}function d(){if(!o.value)return;const l=n.parent;o.value=!1,l.vLoadingAddClassList=void 0,s()}const i=j({name:"ElLoading",setup(l,{expose:f}){const{ns:m,zIndex:h}=Q("loading");return f({ns:m,zIndex:h}),()=>{const p=n.spinner||n.svg,A=y("svg",{class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"0 0 50 50",...p?{innerHTML:p}:{}},[y("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),I=n.text?y("p",{class:m.b("text")},[n.text]):void 0;return y(ee,{name:m.b("fade"),onAfterLeave:d},{default:z(()=>[k(R("div",{style:{backgroundColor:n.background||""},class:[m.b("mask"),n.customClass,n.fullscreen?"is-fullscreen":""]},[y("div",{class:m.b("spinner")},[A,I])]),[[W,n.visible]])])})}}}),c=X(i),v=c.mount(document.createElement("div"));return{...J(n),setText:a,removeElLoadingChild:r,close:u,handleAfterLeave:d,vm:v,get $el(){return v.$el}}}let S;const Se=function(e={}){if(!te)return;const t=Ee(e);if(t.fullscreen&&S)return S;const o=Le({...t,closed:()=>{var a;(a=t.closed)==null||a.call(t),t.fullscreen&&(S=void 0)}});we(t,t.parent,o),D(t,t.parent,o),t.parent.vLoadingAddClassList=()=>D(t,t.parent,o);let n=t.parent.getAttribute("loading-number");return n?n=`${Number.parseInt(n)+1}`:n="1",t.parent.setAttribute("loading-number",n),t.parent.appendChild(o.$el),E(()=>o.visible.value=t.visible),t.fullscreen&&(S=o),o},Ee=e=>{var t,o,n,a;let s;return K(e.target)?s=(t=document.querySelector(e.target))!=null?t:document.body:s=e.target||document.body,{parent:s===document.body||e.body?document.body:s,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:s===document.body&&((o=e.fullscreen)!=null?o:!0),lock:(n=e.lock)!=null?n:!1,customClass:e.customClass||"",visible:(a=e.visible)!=null?a:!0,target:s}},we=async(e,t,o)=>{const{nextZIndex:n}=o.vm.zIndex||o.vm._.exposed.zIndex,a={};if(e.fullscreen)o.originalPosition.value=x(document.body,"position"),o.originalOverflow.value=x(document.body,"overflow"),a.zIndex=n();else if(e.parent===document.body){o.originalPosition.value=x(document.body,"position"),await E();for(const s of["top","left"]){const r=s==="top"?"scrollTop":"scrollLeft";a[s]=`${e.target.getBoundingClientRect()[s]+document.body[r]+document.documentElement[r]-Number.parseInt(x(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])a[s]=`${e.target.getBoundingClientRect()[s]}px`}else o.originalPosition.value=x(t,"position");for(const[s,r]of Object.entries(a))o.$el.style[s]=r},D=(e,t,o)=>{const n=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?w(t,n.bm("parent","relative")):V(t,n.bm("parent","relative")),e.fullscreen&&e.lock?V(t,n.bm("parent","hidden")):w(t,n.bm("parent","hidden"))},P=Symbol("ElLoading"),F=(e,t)=>{var o,n,a,s;const r=t.instance,u=l=>M(t.value)?t.value[l]:void 0,d=l=>{const f=K(l)&&(r==null?void 0:r[l])||l;return f&&b(f)},i=l=>d(u(l)||e.getAttribute(`element-loading-${ne(l)}`)),c=(o=u("fullscreen"))!=null?o:t.modifiers.fullscreen,v={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:c,target:(n=u("target"))!=null?n:c?void 0:e,body:(a=u("body"))!=null?a:t.modifiers.body,lock:(s=u("lock"))!=null?s:t.modifiers.lock};e[P]={options:v,instance:Se(v)}},Ae=(e,t)=>{for(const o of Object.keys(t))oe(t[o])&&(t[o].value=e[o])},Ie={mounted(e,t){t.value&&F(e,t)},updated(e,t){const o=e[P];t.oldValue!==t.value&&(t.value&&!t.oldValue?F(e,t):t.value&&t.oldValue?M(t.value)&&Ae(t.value,o.options):o==null||o.instance.close())},unmounted(e){var t;(t=e[P])==null||t.instance.close()}};const Te={class:"albumPhoto_container"},ke={class:"albumPhoto_content"},Ne=["src"],Pe={"element-loading-text":"Loading..."},Be={key:0,class:"finished"},Ve=j({__name:"albumPhoto",setup(e){let t="https://pic.imgdb.cn/item/64c607331ddac507cc49cc9d.jpg";const o=le(),n=$(()=>Number(o.params.id)),a=$(()=>{let l=o.query.title;return o.meta.title=l,document.title=`Swhite's小窝-${l}`,l.split("")});let s=b([]),r=b({page:1,pageSize:10}),u=b();const d=async()=>{let l=await ve({...r.value,id:n.value});s.value.push(...l.data.pageData),u.value=l.data.totalPage};se(()=>{d()});let i=b(!1),c=b(!1);const v=()=>{i.value=!0,r.value.page<u.value?(r.value.page++,d()):r.value.page>=u.value&&(c.value=!0),i.value=!1};return(l,f)=>{const m=fe,h=de,p=Ie,A=Ce;return C(),L("div",Te,[R(m,{img:_(t),titleArr:_(a)},null,8,["img","titleArr"]),O("div",ke,[k((C(),ae(h,{shadow:"hover",class:"albumPhoto_elCard","infinite-scroll-disabled":_(c)},{default:z(()=>[(C(!0),L(re,null,ie(_(s),(I,Y)=>(C(),L("img",{class:"albumPhotoItem_img",src:I,alt:"",key:Y},null,8,Ne))),128)),k(O("div",Pe,null,512),[[p,_(i)]]),_(c)?(C(),L("div",Be,"没有更多啦 ┭┮﹏┭┮")):ce("",!0)]),_:1},8,["infinite-scroll-disabled"])),[[A,v]])])])}}});const qe=ue(Ve,[["__scopeId","data-v-de2ddbe2"]]);export{qe as default};
